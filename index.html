<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calculadora de Ganhos</title>
  <link rel="stylesheet" href="css/tokens.css">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div class="main-container">

    <section class="left-section">
      <h2 class="section-title">Junte-se a nós e transforme sua paixão em lucro!</h2>
      <p class="instructions">Na Consultoria de Beleza Natura e Avon, existem cinco níveis, como degraus em uma escada de evolução. Quanto mais você vende, mais alto você sobe nesses níveis, aumentando não só seus aprendizados mas também seus ganhos.</p>
      <button id="tab-natura" class="buttonOutlined" data-category="natura">Quero ser Consultora</button>
    </section>

    <section id="calculadora-ganhos" class="right-section">
      <div class="calculator-title">
        <!--img class="promo-icon" src="img/outlined-finance-littlemachine.svg"-->
        <h1>Simule seus ganhos na Consultoria</h1>
        <!--label for="volume-vendas" class="form-label">Ajuste o valor de suas vendas e veja a estimativa de lucro!</label-->
      </div>
      
      <!-- Slider -->
      <div class="label-slider">
        <label for="volume-vendas" class="slider-label">Escolha o valor das suas vendas</label>
      </div>
      <div class="calculator">
        <input id="volume-vendas" class="calculator-slider" type="range" min="50" max="500" step="50" value="100">
        <div class="calculator-slider-value" id="calculator-slider-value">R$ 100</div>
      </div>

      <!-- Sugestão de produtos e ganhos -->
      <div class="promo-container">
        
        <div class="promo" id="product-area">
            <img id="promo-image" class="promo-image" src="https://production.na01.natura.com/on/demandware.static/-/Sites-natura-br-storefront-catalog/default/dwb1b80d42/NATBRA-106019_1.jpg"," alt="Produto inicial">
            <button class="info-button" src="img/outlined-action-zoomin.svg">
                <div class="tooltip">
                    <p id="product-subtitle">Conjunto Tododia Ameixa e Flor de Baunilha<strong>R$ 74,90</strong></p>
                </div>
            </button>
        </div>

        <div id="earnings-result" class="earnings-result">
          <label for="volume-vendas" class="form-label">Veja quanto você ganha</label>

          <ul id="results-list" class="results-list">

            <li class="diamond">
              <div class="level-icon">
                <span class="level-mobile">Diamante</span>
                <img src="img/outlined-content-diamond-negative.svg" class="icon">
              </div>
              <div class="value-to-gain">
                <div class="value-block">
                  <span class="level">Diamante</span><br>

                  <div class="amount">
                    <div class="mark-1">
                      <strong><span id="ganhos-natura-diamond" class="amount-number"> R$ 0,00</span></strong>
                      <span class="amount-mark">Natura</span>
                    </div>
                    <div class="mark-2">
                      <strong><span id="ganhos-avon-diamond" class="amount-number"> 0,00</span></strong>
                      <span class="amount-mark">Avon</span>
                    </div>
                  </div>

                </div>
              </div>
            </li>
            <li class="gold">
              <div class="level-icon">
                <span class="level-mobile">Ouro</span>
                <img src="img/outlined-content-gold-negative.svg" class="icon">
              </div>
              <div class="value-to-gain">
                <div class="value-block">
                  <span class="level">Ouro</span><br>

                  <div class="amount">
                    <div class="mark-1">
                      <strong><span id="ganhos-natura-gold" class="amount-number"> 0,00</span></strong>
                      <span class="amount-mark">Natura</span>
                    </div>
                    <div class="mark-2">
                      <strong><span id="ganhos-avon-gold" class="amount-number"> 0,00</span></strong>
                      <span class="amount-mark">Avon</span>
                    </div>
                  </div>

                </div>
              </div>
            </li>
            <li class="silver">
              <div class="level-icon">
                <span class="level-mobile">Prata</span>
                <img src="img/outlined-content-silver-negative.svg" class="icon">
              </div>
              <div class="value-to-gain">
                <div class="value-block">
                  <span class="level">Silver</span><br>

                  <div class="amount">
                    <div class="mark-1">
                      <strong><span id="ganhos-natura-silver" class="amount-number"> 0,00</span></strong>
                      <span class="amount-mark">Natura</span>
                    </div>
                    <div class="mark-2">
                      <strong><span id="ganhos-avon-silver" class="amount-number"> 0,00</span></strong>
                      <span class="amount-mark">Avon</span>
                    </div>
                  </div>

                </div>
              </div>
            </li>
            <li class="bronze">
              <div class="level-icon">
              <span class="level-mobile">Bronze</span>
              <img src="img/outlined-content-bronze-negative.svg" class="icon">
            </div>
              <div class="value-to-gain">
                <div class="value-block">
                  <span class="level">Bronze</span><br>

                  <div class="amount">
                    <div class="mark-1">
                      <strong><span id="ganhos-natura-bronze" class="amount-number"> 0,00</span></strong>
                      <span class="amount-mark">Natura</span>
                    </div>
                    <div class="mark-2">
                      <strong><span id="ganhos-avon-bronze" class="amount-number"> 0,00</span></strong>
                      <span class="amount-mark">Avon</span>
                    </div>
                  </div>

                </div>
              </div>
            </li>
            <li class="seed">
              <div class="level-icon">
                <span class="level-mobile">Semente</span>
                <img src="img/outlined-content-seed-negative.svg" class="icon">
              </div>
              <div class="value-to-gain">
                <div class="value-block">
                  <span class="level">Semente</span><br>

                  <div class="amount">
                    <div class="mark-1">
                      <strong><span id="ganhos-natura-seed" class="amount-number"> 0,00</span></strong>
                      <span class="amount-mark">Natura</span>
                    </div>
                    <div class="mark-2">
                      <strong><span id="ganhos-avon-seed" class="amount-number"> 0,00</span></strong>
                      <span class="amount-mark">Avon</span>
                    </div>
                  </div>

                </div>
              </div>
            </li>

          </ul>
        </div>
      </div>
    </section>
  </div>

  <!-- Script para Atualizar Ganhos e Imagens -->
  <script>
    document.addEventListener('DOMContentLoaded', async () => {
        const comissoes = {
            'seed': { 'natura': 0.20, 'avon': 0.20 },
            'bronze': { 'natura': 0.30, 'avon': 0.30 },
            'silver': { 'natura': 0.30, 'avon': 0.35 },
            'gold': { 'natura': 0.32, 'avon': 0.38 },
            'diamond': { 'natura': 0.35, 'avon': 0.38 }
        };
    
        // Carrega os produtos do arquivo JSON
        let produtos;
        try {
            const response = await fetch('json/produtos.json');
            produtos = await response.json();
        } catch (error) {
            console.error('Erro ao carregar os dados dos produtos:', error);
            return;
        }
    
        const slider = document.getElementById('volume-vendas');
        const sliderValue = document.getElementById('calculator-slider-value');
        const imagemProduto = document.getElementById('promo-image');
        const produtoLegenda = document.getElementById('product-subtitle');
    
        function atualizarGanhos() {
            const volumeVendas = parseFloat(slider.value);
            sliderValue.textContent = `R$ ${volumeVendas}`;
    
            let previousKey = 0;
            Object.keys(produtos).sort((a, b) => a - b).forEach(key => {
                if (volumeVendas >= key) {
                    previousKey = key; // Atualiza a chave do produto que deverá ser mostrado
                }
            });
    
            const produto = produtos[previousKey];
    
            if (!imagemProduto.src.endsWith(produto['imagem'])) {
                imagemProduto.classList.add('fade-image');
                setTimeout(() => {
                    imagemProduto.src = produto['imagem'];
                    imagemProduto.alt = produto['info'][0]['nome']; // Assuming first product info is the default
                    produtoLegenda.innerHTML = `Por R$ <strong>${produto['info'][0]['valor']}</strong><br>${produto['info'][0]['nome']}`;
                    imagemProduto.classList.remove('fade-image');
                    updateInfoButtons(produto['info'], imagemProduto);
                }, 300);
            }
    
            Object.keys(comissoes).forEach(nivel => {
                const ganhoNatura = (volumeVendas * comissoes[nivel]['natura']).toFixed(0);
                const ganhoAvon = (volumeVendas * comissoes[nivel]['avon']).toFixed(0);
                document.getElementById(`ganhos-natura-${nivel}`).textContent = `R$ ${ganhoNatura}`;
                document.getElementById(`ganhos-avon-${nivel}`).textContent = `R$ ${ganhoAvon}`;
            });
        }
    
        function updateInfoButtons(info, imageElement) {
            document.querySelectorAll('.info-button').forEach(button => button.remove());
            info.forEach((item, index) => {
                let button = document.createElement('button');
                button.id = `info-button-${index}`;
                button.className = 'info-button';
                button.textContent = index + 1;
                button.style.position = 'absolute';
                button.style.top = item.coords.top;
                button.style.right = item.coords.right;
                button.style.backgroundColor = item.backgroundColor;
    
                let tooltip = document.createElement('div');
                tooltip.className = 'tooltip';
                tooltip.innerHTML = `Por R$ <strong>${item.valor}</strong><br>${item.nome}`;
                button.appendChild(tooltip);
    
                button.onmouseover = () => tooltip.style.visibility = 'visible';
                button.onmouseout = () => tooltip.style.visibility = 'hidden';
                button.ontouchstart = (event) => {
                    event.preventDefault();
                    let isVisible = tooltip.style.visibility === 'visible';
                    document.querySelectorAll('.tooltip').forEach(t => t.style.visibility = 'hidden');
                    tooltip.style.visibility = isVisible ? 'hidden' : 'visible';
                };
    
                imageElement.parentNode.appendChild(button);
            });
        }
    
        slider.addEventListener('input', atualizarGanhos);
        window.onload = atualizarGanhos; // Assegura a inicialização correta
    });
    </script>
    
    
</body>
</html>